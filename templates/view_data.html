{% extends "base.html" %}

{% block title %}Veriler - Admin Panel{% endblock %}

{% block content %}
<!-- Navigation -->
<div class="card" style="background: #343a40; color: white; margin-bottom: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; flex-wrap: wrap; gap: 15px;">
        <h2 style="margin: 0; color: white; font-size: 1.5em;">ğŸ“‹ Veri GÃ¶rÃ¼ntÃ¼leme</h2>
        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
            <a href="/" class="btn" style="background: #495057; margin: 0; padding: 8px 20px;">ğŸ“Š Ana Sayfa</a>
            <a href="/view" class="btn btn-secondary" style="margin: 0; padding: 8px 20px;">ğŸ“‹ Verileri GÃ¶r</a>
            <a href="/api/vehicles" class="btn btn-secondary" style="margin: 0; padding: 8px 20px;" target="_blank">ğŸ“¡ JSON API</a>
            <a href="/admin-panel" class="btn" style="background: #28a745; margin: 0; padding: 8px 20px;">ğŸ‘¥ SipariÅŸler</a>
        </div>
    </div>
</div>

<div class="card">
    <h1>ğŸ“Š KayÄ±tlÄ± Veriler</h1>
    <p class="subtitle">Toplam {{ vehicles.total }} kayÄ±t</p>
    
    <div class="action-buttons">
        <a href="/" class="btn">â¬…ï¸ Ana Sayfa</a>
        <a href="/api/vehicles" class="btn btn-secondary" target="_blank">ğŸ“¡ JSON API</a>
    </div>
    
    {% if vehicles.items %}
    <div class="table-responsive">
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Marka</th>
                <th>Model</th>
                <th>YÄ±l</th>
                <th>Fiyat</th>
                <th>Eklenme</th>
            </tr>
        </thead>
        <tbody>
            {% for vehicle in vehicles.items %}
            <tr>
                <td>{{ vehicle.id }}</td>
                <td>{{ vehicle.marka }}</td>
                <td>{{ vehicle.model }}</td>
                <td>{{ vehicle.yil }}</td>
                <td>{{ '{:,}'.format(vehicle.fiyat).replace(',', '.') }} â‚º</td>
                <td>{{ vehicle.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    </div>
    
    <!-- Sayfalama -->
    <div class="pagination">
        {% if vehicles.has_prev %}
            <a href="{{ url_for('view_data', page=vehicles.prev_num) }}">â¬…ï¸ Ã–nceki</a>
        {% endif %}
        
        <a href="#" class="active">Sayfa {{ vehicles.page }} / {{ vehicles.pages }}</a>
        
        {% if vehicles.has_next %}
            <a href="{{ url_for('view_data', page=vehicles.next_num) }}">Sonraki â¡ï¸</a>
        {% endif %}
    </div>
    {% else %}
    <p style="text-align: center; color: #666; margin-top: 30px;">
        HenÃ¼z veri yok. Excel dosyasÄ± yÃ¼kleyin!
    </p>
    {% endif %}
</div>

<style>
    @media (max-width: 768px) {
        .card > div[style*="background: #343a40"] h2 {
            font-size: 1.2em !important;
            text-align: center;
            width: 100%;
        }
        
        .card > div[style*="background: #343a40"] > div:first-child {
            justify-content: center !important;
        }
        
        .card > div[style*="background: #343a40"] > div > div {
            justify-content: center !important;
            width: 100%;
        }
    }
    
    @media (max-width: 480px) {
        .card > div[style*="background: #343a40"] h2 {
            font-size: 1em !important;
        }
        
        .card > div[style*="background: #343a40"] .btn {
            padding: 6px 12px !important;
            font-size: 0.85em !important;
        }
        
        table {
            font-size: 0.8em;
        }
        
        th, td {
            padding: 6px 4px !important;
        }
    }
</style>
{% endblock %}